generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Order {
  id                String   @id @default(cuid())
  orderNumber       String   @unique
  totalPrice        Float
  financialStatus   String?
  fulfillmentStatus String?
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt

  rawData           Json     // store raw Shopify/Viniculum JSON
  provider          String   // "shopify" | "viniculum"

  remittances       Remittance[]
}

model Remittance {
  id          String   @id @default(cuid())
  orderNumber String
  provider    String   // "shiprocket", "delhivery", "razorpay", etc
  amount      Float
  receivedAt  DateTime
  rawData     Json?    // optional JSON from excel/API

  // Relations
  order   Order? @relation(fields: [orderNumber], references: [orderNumber], onDelete: Cascade)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}
model Order {
  id               String   @id
  orderNumber      String   @unique
  createdAt        DateTime
  totalPrice       Float
  financialStatus  String?
  fulfillmentStatus String?
  rawData          Json?
  provider         String   @default("shopify")
}
